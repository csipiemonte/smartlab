<!DOCTYPE HTML>
<html manifest="OfflineApp.manifest">
<head>
<meta charset="utf-8">
<title>SmartTrek</title>
<meta name="generator" content="NSB/AppStudio 4.2.2.0$zkdb" />
<meta name='date' content='2014-10-09 14:22:29.275259' />
<meta name='version' content='1.0.0' />
<meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no, minimal-ui' />
<meta name='apple-mobile-web-app-capable' content='YES' />
<meta name='mobile-web-app-capable' content='yes' />
<meta name='apple-mobile-web-app-status-bar-style' content='default' />
<meta name='apple-mobile-web-app-title' content='' />
<meta name='copyright' content='Copyright 2014 ABC Company' />
<noscript><h1>JavaScript must be enabled!</h1></noscript>
<link rel='apple-touch-icon' href='nsb/images/LauncherIcon57.png' />
<!-- Startup images -->
<!-- iOS 6 & 7 iPad (retina, portrait) -->
<link href='splash/ios/1536x2008.png'
      media='(device-width: 768px) and (device-height: 1024px)
         and (orientation: portrait)
         and (-webkit-device-pixel-ratio: 2)'
      rel='apple-touch-startup-image'>
<!-- iOS 6 & 7 iPad (retina, landscape) -->
<link href='splash/ios/1496x2048.png'
      media='(device-width: 768px) and (device-height: 1024px)
         and (orientation: landscape)
         and (-webkit-device-pixel-ratio: 2)'
      rel='apple-touch-startup-image'>
<!-- iOS 6 iPad (portrait) -->
<link href='splash/ios/768x1004.png'
      media='(device-width: 768px) and (device-height: 1024px)
         and (orientation: portrait)
         and (-webkit-device-pixel-ratio: 1)'
      rel='apple-touch-startup-image'>
<!-- iOS 6 iPad (landscape) -->
<link href='splash/ios/748x1024.png'
      media='(device-width: 768px) and (device-height: 1024px)
         and (orientation: landscape)
         and (-webkit-device-pixel-ratio: 1)'
      rel='apple-touch-startup-image'>
<!-- iOS 6 & 7 iPhone 5 -->
<link href='splash/ios/640x1096.png'
      media='(device-width: 320px) and (device-height: 568px)
         and (-webkit-device-pixel-ratio: 2)'
      rel='apple-touch-startup-image'>
<!-- iOS 6 & 7 iPhone (retina) -->
<link href='splash/ios/640x920.png'
      media='(device-width: 320px) and (device-height: 480px)
         and (-webkit-device-pixel-ratio: 2)'
      rel='apple-touch-startup-image'>
<!-- iOS 6 iPhone -->
<link href='splash/ios/320x460.png'
      media='(device-width: 320px) and (device-height: 480px)
         and (-webkit-device-pixel-ratio: 1)'
      rel='apple-touch-startup-image'>
<link rel='icon' sizes='192x192' href='nsb/images/196.png' />
<script src="nsb/jquery.js"></script>
<script src="nsb/hfunc.js"></script>
<link href="nsb/nsbstyle.css" rel="stylesheet">
<script src="nsb/fastclick.js"></script>
<script src="nsb/jquery.mobile.js"></script>
<link href="nsb/jquery.mobile.css" rel="stylesheet">
<script src="nsb/complexfunctions.js"></script>

<script src="nsb/library/jquery.xml2json.js"></script>


<style type="text/css">
#imgLogoSDP {position:absolute; left:10px; right:px; top:425px; bottom:auto; height:28px; width:167px}
#imgLogoCSI {position:absolute; left:258px; right:auto; top:430px; bottom:auto; height:24px; width:54px}
#lblTitolo {position:absolute; left:38px; right:auto; top:64px; bottom:auto; height:auto; width:248px}
#lblSottotitolo {position:absolute; left:51px; right:auto; top:134px; bottom:auto; height:19px; width:208px}
#btnSensor {position:absolute; left:75px; right:auto; top:175px; bottom:auto; height:74px; width:130px}
#Line1 {position:absolute; left:10px; right:10px; top:122px; bottom:auto; height:3px; width:auto; margin:0px;}
#btnSettings {position:absolute; left:75px; right:auto; top:362px; bottom:auto; height:auto; width:130px}
#ttipSensor {position:absolute; left:221px; right:auto; top:198px; bottom:auto; height:24px; width:24px}
#ttipSettings {position:absolute; left:221px; right:auto; top:366px; bottom:auto; height:24px; width:24px}
#HeaderBar {position: absolute; width:100%; height:40px; left:0px; top:0px;}
#btnTrack {position:absolute; left:76px; right:auto; top:278px; bottom:auto; height:59px; width:128px}
#ttipTrack {position:absolute; left:222px; right:auto; top:293px; bottom:auto; height:24px; width:24px}
#HeaderBar1 {position: absolute; width:100%; height:40px; left:0px; top:0px;}
#btnStart {position:absolute; left:14px; right:auto; top:270px; bottom:auto; height:52px; width:209px}
#TextArea1 {position:absolute; left:12px; right:auto; top:332px; bottom:auto; height:90px; width:303px}
#imgLogoCSI2 {position:absolute; left:255px; right:auto; top:431px; bottom:auto; height:24px; width:54px}
#imgLogoSDP2 {position:absolute; left:7px; right:px; top:427px; bottom:auto; height:28px; width:167px}
#lblCStream {position:absolute; left:10px; right:auto; top:55px; bottom:auto; height:auto; width:125px}
#lblCSensor {position:absolute; left:10px; right:auto; top:85px; bottom:auto; height:auto; width:125px}
#lblCTime {position:absolute; left:10px; right:auto; top:115px; bottom:auto; height:auto; width:125px}
#lblCLat {position:absolute; left:10px; right:auto; top:145px; bottom:auto; height:auto; width:125px}
#lblCLon {position:absolute; left:10px; right:auto; top:175px; bottom:auto; height:auto; width:125px}
#lblCAlt {position:absolute; left:10px; right:auto; top:205px; bottom:auto; height:auto; width:125px}
#lblCSpeed {position:absolute; left:10px; right:auto; top:235px; bottom:auto; height:auto; width:125px}
#lblStream {position:absolute; left:148px; right:auto; top:55px; bottom:auto; height:auto; width:170px}
#lblSensor {position:absolute; left:148px; right:auto; top:85px; bottom:auto; height:auto; width:170px}
#lblTime {position:absolute; left:148px; right:auto; top:118px; bottom:auto; height:auto; width:170px}
#lblLat {position:absolute; left:148px; right:auto; top:145px; bottom:auto; height:auto; width:170px}
#lblLon {position:absolute; left:148px; right:auto; top:175px; bottom:auto; height:auto; width:170px}
#lblAlt {position:absolute; left:148px; right:auto; top:205px; bottom:auto; height:auto; width:710px}
#lblSpeed {position:absolute; left:148px; right:auto; top:235px; bottom:auto; height:auto; width:170px}
#lblSend {position:absolute; left:247px; right:auto; top:273px; bottom:auto; height:auto; width:56px}
#lblNumber {position:absolute; left:236px; right:auto; top:297px; bottom:auto; height:auto; width:70px}
#HeaderBarSettings {position: absolute; width:100%; height:40px; left:0px; top:0px;}
#imgLogoSDP3 {position:absolute; left:10px; right:px; top:427px; bottom:auto; height:28px; width:167px}
#imgLogoCSI3 {position:absolute; left:258px; right:auto; top:431px; bottom:auto; height:24px; width:54px}
#lblGPS {position:absolute; left:14px; right:auto; top:64px; bottom:auto; height:auto; width:281px}
#lblMapRefreshCopy {position:absolute; left:125px; right:auto; top:168px; bottom:auto; height:auto; width:66px}
#sldRefresh {position: absolute; width:288px; height:auto; left:16px; top:94px;}
#cmbSensor {position:absolute; left:16px; right:auto; top:191px; bottom:auto; height:auto; width:284px}
#Label1 {position:absolute; left:15px; right:auto; top:251px; bottom:auto; height:auto; width:43px}
#lblUUID {position:absolute; left:62px; right:auto; top:253px; bottom:auto; height:auto; width:243px}
#imgLogoSDP3Copy {position:absolute; left:10px; right:px; top:427px; bottom:auto; height:28px; width:167px}
#imgLogoCSI3Copy {position:absolute; left:258px; right:auto; top:431px; bottom:auto; height:24px; width:54px}
#hdrTrack {position: absolute; width:100%; height:40px; left:0px; top:0px;}
#cmbRoute {position:absolute; left:23px; right:auto; top:68px; bottom:auto; height:auto; width:276px}
#Label2 {position:absolute; left:23px; right:auto; top:48px; bottom:auto; height:auto; width:187px}
#btnPlay {position:absolute; left:33px; right:auto; top:285px; bottom:auto; height:71px; width:125px}
#Label3 {position:absolute; left:23px; right:auto; top:110px; bottom:auto; height:auto; width:70px}
#lblPoint {position:absolute; left:108px; right:auto; top:110px; bottom:auto; height:auto; width:81px}
#lblGPSCopy {position:absolute; left:21px; right:auto; top:137px; bottom:auto; height:auto; width:281px}
#sldSend {position: absolute; width:288px; height:auto; left:23px; top:158px;}
#lblSendN {position:absolute; left:15px; right:auto; top:365px; bottom:auto; height:auto; width:285px}
#ftLoop {position:absolute; left:194px; right:auto; top:243px; bottom:auto; height:auto; width:auto}
#Label5 {position:absolute; left:66px; right:auto; top:245px; bottom:auto; height:auto; width:106px}
#lblLat2 {position:absolute; left:17px; right:auto; top:394px; bottom:auto; height:auto; width:140px}
#lblLon2 {position:absolute; left:174px; right:auto; top:394px; bottom:auto; height:auto; width:132px}
#Label6 {position:absolute; left:22px; right:auto; top:206px; bottom:auto; height:auto; width:98px}
#sldStep {position: absolute; width:188px; height:auto; left:123px; top:201px;}
#btnStopSend {position:absolute; left:187px; right:auto; top:287px; bottom:auto; height:67px; width:100px}
body * {font-family:helvetica}
</style>
</head>
<body style="margin:0px;-ms-touch-action:none;">
<script>window.addEventListener('load', function() {new FastClick.attach(document.body)}, false)</script>
<div data-role="page" id="Page_jqm" data-theme="a" style="">

<form id="frmHome" action="" method="GET" onsubmit="return false;" style="display:none; height:100%; position:absolute; top:0px; left:0px; width:100%; ">
<script>
frmHome.innerHTML=[  "<div id='imgLogoSDP' data-nsb-type=image><img src='img/logosdp.jpg'  height=100% width=100% name='imgLogoSDP_img' style='' usemap='imgLogoSDP_map'></div>",
  "<div id='imgLogoCSI' data-nsb-type=image><img src='img/logoCSI.png'  height=100% width=100% name='imgLogoCSI_img' style='' usemap='imgLogoCSI_map'></div>",
  "<div id='lblTitolo' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:50px; font-family:arial; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >SmartTrek</div>",
  "<div id='lblSottotitolo' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:arial; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Smart Localizer Prototype</div>",
  "<button id='btnSensor' class='ui-btn ui-mini  ui-btn-inline ui-icon- ui-btn-icon-none  ' style='margin:0px; overflow:visible;  font-family:; font-style:; font-weight:; ;  ' data-nsb-type=Button_jqm>Show Sensor</button>",
  "<hr id='Line1' class='' style='background-color:black;border-style:solid;border-color:black;border-width:1px;' >",
  "<button id='btnSettings' class='ui-btn ui-mini  ui-btn-inline ui-icon- ui-btn-icon-none  ' style='margin:0px; overflow:visible;  font-family:; font-style:; font-weight:; ;  ' data-nsb-type=Button_jqm>Settings</button>",
  NSB.ToolTip_jqm('ttipSensor','Activate <b>sensor mode</b> that allows you to record the movement of the device.','slide', 'b','','max-width:200px;','info'),
  NSB.ToolTip_jqm('ttipSettings','set the application\'s parameters','slide', 'b','','max-width:200px;','info'),
  NSB.HeaderBar_jqm14('HeaderBar', 'Sensor Demo', '', 'arrow-l', 'none', '', 'arrow-r', 'none', ' style="" class=" "', '', ''),
  "<button id='btnTrack' class='ui-btn ui-mini  ui-btn-inline ui-icon- ui-btn-icon-none  ' style='margin:0px; overflow:visible;  font-family:; font-style:; font-weight:; ;  ' data-nsb-type=Button_jqm>Route simulator</button>",
  NSB.ToolTip_jqm('ttipTrack','simulated a pre-recorded route','slide', 'b','','max-width:200px;','info'),
  ].join('');
</script>
</form>


<form id="frmSensor" action="" method="GET" onsubmit="return false;" style="display:none; height:100%; position:absolute; top:0px; left:0px; width:100%; ">
<script>
frmSensor.innerHTML=[  NSB.HeaderBar_jqm14('HeaderBar1', 'Sensor Mode', 'Home', 'home', 'left', '', 'false', 'right', ' style="" class=" "', '', ''),
  "<button id='btnStart' class='ui-btn ui-mini  ui-btn-inline ui-icon-false ui-btn-icon-none  ' style='margin:0px; overflow:visible; font-size:20px; font-family:; font-style:; font-weight:; color:yellow; background-color:red; ;  ' data-nsb-type=Button_jqm>Start</button>",
  "<textarea id='TextArea1' class='ui-mini  ' name='' style='display:block; margin-top:0px; text-align:left; font-size:12px;; font-family:; font-style:; font-weight:; color:; background-color:white;-webkit-overflow-scrolling:touch; max-height:auto; '  autocorrect='on'  autocomplete='on'  autocapitalize='on' data-autogrow=false  placeholder=''></textarea>",
  "<div id='imgLogoCSI2' data-nsb-type=image><img src='img/logoCSI.png'  height=100% width=100% name='imgLogoCSI2_img' style='' usemap='imgLogoCSI2_map'></div>",
  "<div id='imgLogoSDP2' data-nsb-type=image><img src='img/logosdp.jpg'  height=100% width=100% name='imgLogoSDP2_img' style='' usemap='imgLogoSDP2_map'></div>",
  "<div id='lblCStream' class='' data-nsb-type=Label style='text-align:right; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Stream:</div>",
  "<div id='lblCSensor' class='' data-nsb-type=Label style='text-align:right; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Sensor ID:</div>",
  "<div id='lblCTime' class='' data-nsb-type=Label style='text-align:right; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >TimeStamp:</div>",
  "<div id='lblCLat' class='' data-nsb-type=Label style='text-align:right; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Latitude:</div>",
  "<div id='lblCLon' class='' data-nsb-type=Label style='text-align:right; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Longitude:</div>",
  "<div id='lblCAlt' class='' data-nsb-type=Label style='text-align:right; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Altitude [m]:</div>",
  "<div id='lblCSpeed' class='' data-nsb-type=Label style='text-align:right; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Speed [m/s]:</div>",
  "<div id='lblStream' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0.0</div>",
  "<div id='lblSensor' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:12px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0.0</div>",
  "<div id='lblTime' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:12px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0.0</div>",
  "<div id='lblLat' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0.0</div>",
  "<div id='lblLon' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0.0</div>",
  "<div id='lblAlt' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0.0</div>",
  "<div id='lblSpeed' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0.0</div>",
  "<div id='lblSend' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >n. msg</div>",
  "<div id='lblNumber' class='' data-nsb-type=Label style='text-align:center; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0</div>",
  ].join('');
</script>
</form>


<form id="frmSettings" action="" method="GET" onsubmit="return false;" style="display:none; height:100%; position:absolute; top:0px; left:0px; width:100%; ">
<script>
frmSettings.innerHTML=[  NSB.HeaderBar_jqm14('HeaderBarSettings', 'Settings', '', 'home', 'none', 'Save', 'check', 'right', ' style="" class=" "', '', ''),
  "<div id='imgLogoSDP3' data-nsb-type=image><img src='img/logosdp.jpg'  height=100% width=100% name='imgLogoSDP3_img' style='' usemap='imgLogoSDP3_map'></div>",
  "<div id='imgLogoCSI3' data-nsb-type=image><img src='img/logoCSI.png'  height=100% width=100% name='imgLogoCSI3_img' style='' usemap='imgLogoCSI3_map'></div>",
  "<div id='lblGPS' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Refresh interval (100 - 10000 msec)</div>",
  "<div id='lblMapRefreshCopy' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Sensor</div>",
  "<div  id='sldRefresh' style=''><input type='range' id='sldRefresh_inner' data-mini=true  style='color:color; background-color:white; ' name=''   value='500' min='100' max='10000' step='100' data-track-theme='a' class=' '></div>",
  NSB.Select_jqm('cmbSensor', '', '1,2', 0, 1, '', '','', 'arrow-d', 'right', 'false', 'true', 'a', '', '', '', '','', ''),
  "<div id='Label1' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:14px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >UUID:</div>",
  "<div id='lblUUID' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:12px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >UUID</div>",
  ].join('');
</script>
</form>


<form id="frmTrack" action="" method="GET" onsubmit="return false;" style="display:none; height:100%; position:absolute; top:0px; left:0px; width:100%; ">
<script>
frmTrack.innerHTML=[  "<div id='imgLogoSDP3Copy' data-nsb-type=image><img src='img/logosdp.jpg'  height=100% width=100% name='imgLogoSDP3Copy_img' style='' usemap='imgLogoSDP3Copy_map'></div>",
  "<div id='imgLogoCSI3Copy' data-nsb-type=image><img src='img/logoCSI.png'  height=100% width=100% name='imgLogoCSI3Copy_img' style='' usemap='imgLogoCSI3Copy_map'></div>",
  NSB.HeaderBar_jqm14('hdrTrack', 'Track Simulator', 'Home', 'home', 'left', '', 'arrow-r', 'none', ' style="" class=" "', '', ''),
  NSB.Select_jqm('cmbRoute', '', '1,2', 0, 1, '', '','', 'arrow-d', 'right', 'false', 'true', 'a', '', 'data-mini=true', '', '','', ''),
  "<div id='Label2' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Select a route to play:</div>",
  "<button id='btnPlay' class='ui-btn ui-mini  ui-btn-inline ui-icon- ui-btn-icon-none  ' style='margin:0px; overflow:visible; font-size:20px; font-family:; font-style:; font-weight:; color:yellow; background-color:green; ;  ' data-nsb-type=Button_jqm>Play</button>",
  "<div id='Label3' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Point n.:</div>",
  "<div id='lblPoint' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >0</div>",
  "<div id='lblGPSCopy' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Send interval (100 - 10000 msec)</div>",
  "<div  id='sldSend' style=''><input type='range' id='sldSend_inner' data-mini=true  style='color:color; background-color:white; ' name=''   value='1000' min='100' max='10000' step='100' data-track-theme='a' class=' '></div>",
  "<div id='lblSendN' class='' data-nsb-type=Label style='text-align:center; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Sent 0 / 0 GPS points</div>",
  "<div id='ftLoop' style=''><select id='ftLoop_inner' name='ftLoop' data-role=flipswitch data-mini=true data-corners='false' style='' class=' '><option>Off</option><option>On</option></select></div>",
  "<div id='Label5' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Loop IN/OUT:</div>",
  "<div id='lblLat2' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:12px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Lat: 0.00000</div>",
  "<div id='lblLon2' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:12px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Lon: 0.00000</div>",
  "<div id='Label6' class='' data-nsb-type=Label style='text-align:left; text-shadow:none; font-size:16px; font-family:helvetica; font-style:normal; font-weight:bold; color:black; background-color:trasparente; border-style:;border-color:transparent;border-width:1px; ' >Step (1-10):</div>",
  "<div  id='sldStep' style=''><input type='range' id='sldStep_inner' data-mini=true  style='color:color; background-color:white; ' name=''   value='1' min='1' max='10' step='1' data-track-theme='a' class=' '></div>",
  "<button id='btnStopSend' class='ui-btn ui-mini  ui-btn-inline ui-icon- ui-btn-icon-none  ' style='margin:0px; overflow:visible; font-size:20px; font-family:; font-style:; font-weight:; color:yellow; background-color:red; ;  ' data-nsb-type=Button_jqm>STOP</button>",
  ].join('');
</script>
</form>

</div>
<script>
if(!navigator.cookieEnabled) NSB.MsgBox('Please turn cookies on.');
(function(){var all=document.getElementsByTagName('*');for(var i=0;i<all.length;i++)if(typeof all[i].id!='undefined'&&typeof window[all[i].id]=='undefined')window[all[i].id]=all[i];})()

window.addEventListener('load', function() {
  frmHome.style.display = 'block';

  NSB.addProperties(imgLogoSDP);
  NSB.addProperties(imgLogoCSI);


  NSB.addProperties(lblTitolo);


  NSB.addProperties(lblSottotitolo);
  NSB.addDisableProperty(btnSensor);
  NSB.addProperties(btnSensor);
  btnSensor.onclick=function(){ChangeForm(frmSensor)};
  NSB.addProperties(Line1);
  NSB.addDisableProperty(btnSettings);
  NSB.addProperties(btnSettings);
  btnSettings.onclick=function(){ChangeForm(frmSettings)};
  NSB.addProperties(ttipSensor);
  NSB.addProperties(ttipSettings);
  NSB.addProperties(HeaderBar);
  NSB.addDisableProperty(HeaderBar);


  if(typeof(HeaderBar.onclick)=='function'){
    if(typeof(HeaderBar_left)!='undefined') HeaderBar_left.onclick=function() {HeaderBar.onclick(HeaderBar_left.getAttribute('nsbvalue'))};
    if(typeof(HeaderBar_right)!='undefined') HeaderBar_right.onclick=function() {HeaderBar.onclick(HeaderBar_right.getAttribute('nsbvalue'))}};
  NSB.addDisableProperty(btnTrack);
  NSB.addProperties(btnTrack);
  btnTrack.onclick=function(){ChangeForm(frmTrack)};
  NSB.addProperties(ttipTrack);
  frmHome.style.display = 'none';
  
}, false);
frmHome.onsubmit=function(event){window.event.stopPropagation();window.event.preventDefault()};
NSB.addProperties(frmHome);
 //this form show the main manù

window.addEventListener('load', function() {
  frmSensor.style.display = 'block';

  NSB.addProperties(HeaderBar1);
  NSB.addDisableProperty(HeaderBar1);


  if(typeof(HeaderBar1.onclick)=='function'){
    if(typeof(HeaderBar1_left)!='undefined') HeaderBar1_left.onclick=function() {HeaderBar1.onclick(HeaderBar1_left.getAttribute('nsbvalue'))};
    if(typeof(HeaderBar1_right)!='undefined') HeaderBar1_right.onclick=function() {HeaderBar1.onclick(HeaderBar1_right.getAttribute('nsbvalue'))}};
  NSB.addDisableProperty(btnStart);
  NSB.addProperties(btnStart);

  TextArea1.ontouchmove=function(e){e.stopPropagation()};
  NSB.addProperties(TextArea1);
  NSB.addProperties(imgLogoCSI2);
  NSB.addProperties(imgLogoSDP2);


  NSB.addProperties(lblCStream);


  NSB.addProperties(lblCSensor);


  NSB.addProperties(lblCTime);


  NSB.addProperties(lblCLat);


  NSB.addProperties(lblCLon);


  NSB.addProperties(lblCAlt);


  NSB.addProperties(lblCSpeed);


  NSB.addProperties(lblStream);


  NSB.addProperties(lblSensor);


  NSB.addProperties(lblTime);


  NSB.addProperties(lblLat);


  NSB.addProperties(lblLon);


  NSB.addProperties(lblAlt);


  NSB.addProperties(lblSpeed);


  NSB.addProperties(lblSend);


  NSB.addProperties(lblNumber);
  frmSensor.style.display = 'none';
  
}, false);
frmSensor.onsubmit=function(event){window.event.stopPropagation();window.event.preventDefault()};
NSB.addProperties(frmSensor);
 //Geolocation - this form gets the current location
 //and displays a map of it. It also shows the current
 //speed and altitude.

 //Set up global variables
var gps;
var flgJSON;
var timerRef;
var jt;
var nmsg;
var intervalRefresh;

longitude = 0;
latitude = 0;
lastRefresh = 0;
flgJSON = False;

btnStart.onclick = function() { savethefunction_rvar="";

  if(btnStart.text == "Start") {
 //This starts scanning the current location. It checks it every x seconds.
 //If it gets the data successfully, the handler function is called.
 //If not, errorCallBack is called.
 //NOTE: the timer not work properly in phonegap/cordova

    nmsg = 0;
    options={timeout: 100, maximumAge: 100, enableHighAccuracy: True}
    options={enableHighAccuracy: False}
    gps = navigator.geolocation.watchPosition(onGeolocation, errorCallBack, options);

    timerRef = setInterval (onTimer, intervalRefresh);
 //disable the stop button, enable the start button
    btnStart.text = "Stop";
 } else {
 //Stop checking the current location
    navigator.geolocation.clearWatch(gps);
    clearInterval(timerRef);
    btnStart.text = "Start";
  }
return savethefunction_rvar; }


function onGeolocation(location) { savethefunction_rvar="";
 var fdate;
  fdate = TimeStamp();
 // get the location coordinate

  if(location.coords.longitude == null) {
     longitudine = 0;
 } else {
     longitudine = location.coords.longitude;
  }

  if(location.coords.latitude == null) {
     latitudine = 0;
 } else {
     latitudine = location.coords.latitude;
  }

  if(location.coords.speed == null) {
     vel = 0;
 } else {
     vel = location.coords.speed;
  }

  if(location.coords.altitude == null) {
     altitudine = 0;
 } else {
     altitudine = location.coords.altitude;
  }


 // build a JSON message
  jt = "{" + '"' + "stream" + '"' + ": " + '"' + "" + NomeStream + "" + '"' + ", ";
  jt = jt + "" + '"' + "sensor" + '"' + ": " + '"' + "" + SensorID + "" + '"' + ", ";
  jt = jt + "" + '"' + "values" + '"' + ": [{";
  jt = jt + "" + '"' + "time" + '"' + ": " + '"' + "" +  fdate + "" + '"' + ", ";
  jt = jt + "" + '"' + "components" + '"' + ": {";
  jt = jt + "" + '"' + "longitude" + '"' + ": " + '"' + "" + longitudine + "" + '"' + ", ";
  jt = jt + "" + '"' + "latitude" + '"' + ": " + '"' + "" + latitudine + "" + '"' + ", ";
  jt = jt + "" + '"' + "altitude" + '"' + ": " + '"' + "" + altitudine + "" + '"' + ", ";
  jt = jt + "" + '"' + "speed" + '"' + ": " + '"' + "" + vel + "" + '"' + "}}]} ";

 // displey data on screen
  lblStream.Caption = NomeStream;
  lblSensor.Caption = SensorID;
  lblTime.Caption = fdate;
  lblLat.Caption = latitudine;
  lblLon.Caption = longitudine;
  lblAlt.Caption = altitudine;
  lblSpeed.Caption = vel;
  TextArea1.text = jt;

return savethefunction_rvar; }

function onTimer() { savethefunction_rvar="";
    nmsg = nmsg + 1;
    lblNumber.Caption = nmsg;
var xmlHttp = new XMLHttpRequest();
      xmlHttp.open( "POST", urlSend, True);
      xmlHttp.setRequestHeader("Authorization", "Basic c21hcnRsYWI6VXgwbXU1aXQ="); 
      xmlHttp.setRequestHeader("Content-Type", "application/json "); 
      xmlHttp.send( jt );
return savethefunction_rvar; }

function errorCallBack(Error) { savethefunction_rvar="";
 //do nothing
return savethefunction_rvar; }


frmSensor.onshow = function() { savethefunction_rvar="";
    TextArea1.text = "";
    nmsg = 0;
return savethefunction_rvar; }

HeaderBar1.onclick = function(button) { savethefunction_rvar="";
    if(TypeName(button)=="object" )  { return savethefunction_rvar; }

 // manage the "save" button click
  if(button == "Home") {
      if(btnStart.text == "Play") {
          ChangeForm(frmHome);
 } else {
          btnStart.onclick();
          ChangeForm(frmHome);
      }
  }
return savethefunction_rvar; }

window.addEventListener('load', function() {
  frmSettings.style.display = 'block';

  NSB.addProperties(HeaderBarSettings);
  NSB.addDisableProperty(HeaderBarSettings);


  if(typeof(HeaderBarSettings.onclick)=='function'){
    if(typeof(HeaderBarSettings_left)!='undefined') HeaderBarSettings_left.onclick=function() {HeaderBarSettings.onclick(HeaderBarSettings_left.getAttribute('nsbvalue'))};
    if(typeof(HeaderBarSettings_right)!='undefined') HeaderBarSettings_right.onclick=function() {HeaderBarSettings.onclick(HeaderBarSettings_right.getAttribute('nsbvalue'))}};
  NSB.addProperties(imgLogoSDP3);
  NSB.addProperties(imgLogoCSI3);


  NSB.addProperties(lblGPS);


  NSB.addProperties(lblMapRefreshCopy);
  $('#sldRefresh .ui-slider').css('margin','0px');
  sldRefresh.__defineGetter__('value', function(){return sldRefresh_inner.value});
  sldRefresh.__defineSetter__('value', function(n){ sldRefresh_inner.value=n});
  sldRefresh.__defineGetter__('min', function(){return sldRefresh_inner.min});
  sldRefresh.__defineSetter__('min', function(n){ sldRefresh_inner.min=n});
  sldRefresh.__defineGetter__('max', function(){return sldRefresh_inner.max});
  sldRefresh.__defineSetter__('max', function(n){ sldRefresh_inner.max=n});
  sldRefresh.__defineGetter__('step', function(){return sldRefresh_inner.step});
  sldRefresh.__defineSetter__('step', function(n){ sldRefresh_inner.step=n});
  sldRefresh.setValue=function(n){$('#sldRefresh_inner').val(n).slider('refresh')};
  NSB.addProperties(sldRefresh);
  if(typeof(cmbSensor)=='undefined') cmbSensor={id:'cmbSensor'};
  NSB.Select_jqm_init(cmbSensor,'','');


  NSB.addProperties(Label1);


  NSB.addProperties(lblUUID);
  frmSettings.style.display = 'none';
  
}, false);
frmSettings.onsubmit=function(event){window.event.stopPropagation();window.event.preventDefault()};
NSB.addProperties(frmSettings);
 // set the deafault value of combobox
frmSettings.onshow = function() { savethefunction_rvar="";
  cmbSensor.addItem("phonegps01" , "cc1bfe50-491c-560d-a235-0e4134bbdc23");
  cmbSensor.addItem("phonegps02" , "5391c45d-7350-5f9b-b971-f711e2766123");
  cmbSensor.addItem("phonegps03" , "a8b223bc-6aa8-5fa2-a217-32546bbd5b70");
  cmbSensor.addItem("phonegps04" , "3a58c011-1ad5-5b60-b1fc-68f8d81098e0");
  cmbSensor.addItem("phonegps05" , "06bbb064-e808-50b6-9fcc-bcf43550d09e");
  lblUUID.Caption = cmbSensor.selectedValue();
return savethefunction_rvar; }

 // when the combobox xchange, set the UUID label
cmbSensor.onchange = function() { savethefunction_rvar="";
  lblUUID.Caption = cmbSensor.selectedValue();
return savethefunction_rvar; }


 // manage the header bar
HeaderBarSettings.onclick = function(button) { savethefunction_rvar="";

  if(TypeName(button)=="object" )  { return savethefunction_rvar; }

 // manage the "save" button click
  if(button == "Save") {
      sensorID = cmbSensor.selectedValue();
      intervalRefresh = sldRefresh.value;
      SensorID = cmbSensor.selectedValue();
      ChangeForm(frmHome);
  }

return savethefunction_rvar; }

window.addEventListener('load', function() {
  frmTrack.style.display = 'block';

  NSB.addProperties(imgLogoSDP3Copy);
  NSB.addProperties(imgLogoCSI3Copy);
  NSB.addProperties(hdrTrack);
  NSB.addDisableProperty(hdrTrack);


  if(typeof(hdrTrack.onclick)=='function'){
    if(typeof(hdrTrack_left)!='undefined') hdrTrack_left.onclick=function() {hdrTrack.onclick(hdrTrack_left.getAttribute('nsbvalue'))};
    if(typeof(hdrTrack_right)!='undefined') hdrTrack_right.onclick=function() {hdrTrack.onclick(hdrTrack_right.getAttribute('nsbvalue'))}};
  if(typeof(cmbRoute)=='undefined') cmbRoute={id:'cmbRoute'};
  NSB.Select_jqm_init(cmbRoute,'','');


  NSB.addProperties(Label2);
  NSB.addDisableProperty(btnPlay);
  NSB.addProperties(btnPlay);



  NSB.addProperties(Label3);


  NSB.addProperties(lblPoint);


  NSB.addProperties(lblGPSCopy);
  $('#sldSend .ui-slider').css('margin','0px');
  sldSend.__defineGetter__('value', function(){return sldSend_inner.value});
  sldSend.__defineSetter__('value', function(n){ sldSend_inner.value=n});
  sldSend.__defineGetter__('min', function(){return sldSend_inner.min});
  sldSend.__defineSetter__('min', function(n){ sldSend_inner.min=n});
  sldSend.__defineGetter__('max', function(){return sldSend_inner.max});
  sldSend.__defineSetter__('max', function(n){ sldSend_inner.max=n});
  sldSend.__defineGetter__('step', function(){return sldSend_inner.step});
  sldSend.__defineSetter__('step', function(n){ sldSend_inner.step=n});
  sldSend.setValue=function(n){$('#sldSend_inner').val(n).slider('refresh')};
  NSB.addProperties(sldSend);


  NSB.addProperties(lblSendN);
  $('#ftLoop .ui-flipswitch').css('margin','0px');
  ftLoop.value=function() {return ftLoop_inner.options[ftLoop_inner.selectedIndex].innerHTML;}
  ftLoop.setting=function() {return ftLoop_inner.options[ftLoop_inner.selectedIndex].innerHTML!='Off';}
  ftLoop.setValue=function(n) {$('#ftLoop_inner').val(n).flipswitch('refresh'); }
  NSB.addDisableProperty(ftLoop);NSB.addProperties(ftLoop);


  NSB.addProperties(Label5);


  NSB.addProperties(lblLat2);


  NSB.addProperties(lblLon2);


  NSB.addProperties(Label6);
  $('#sldStep .ui-slider').css('margin','0px');
  sldStep.__defineGetter__('value', function(){return sldStep_inner.value});
  sldStep.__defineSetter__('value', function(n){ sldStep_inner.value=n});
  sldStep.__defineGetter__('min', function(){return sldStep_inner.min});
  sldStep.__defineSetter__('min', function(n){ sldStep_inner.min=n});
  sldStep.__defineGetter__('max', function(){return sldStep_inner.max});
  sldStep.__defineSetter__('max', function(n){ sldStep_inner.max=n});
  sldStep.__defineGetter__('step', function(){return sldStep_inner.step});
  sldStep.__defineSetter__('step', function(n){ sldStep_inner.step=n});
  sldStep.setValue=function(n){$('#sldStep_inner').val(n).slider('refresh')};
  NSB.addProperties(sldStep);
  NSB.addDisableProperty(btnStopSend);
  NSB.addProperties(btnStopSend);

  frmTrack.style.display = 'none';
  
}, false);
frmTrack.onsubmit=function(event){window.event.stopPropagation();window.event.preventDefault()};
NSB.addProperties(frmTrack);
var nmsg;
var timerRefSend;
var intervalSend;
var maxmsg;
var req;
var data;
var increment;
var stepRoute;
var isInPause;

 // initial settings
frmTrack.onshow = function() { savethefunction_rvar="";
  cmbRoute.addItem("Torino - via Filadelfia" , "torino1.xml");
  cmbRoute.addItem("Torino - corso Agnelli - Beinasco" , "torino2.xml");
  cmbRoute.addItem("Torino - tangenziale" , "torino3.xml");
  cmbRoute.addItem("Torino - corso grosseto - corso agnelli" , "torino4.xml");

  intervalSend = 1000;
  stepRoute = 1;

  cmbRoute.onchange();
  nmsg = 0;
  increment = stepRoute;
  isInPause = False;

return savethefunction_rvar; }

 // manage the play/stop button
btnPlay.onclick = function() { savethefunction_rvar="";
  if(btnPlay.text == "Play") {
 //Start sending data
    nmsg = 0;
    timerRefSend = setInterval (onTimerSend, intervalSend);
    btnPlay.text = "Pause";
    sldSend.disabled = True;
    cmbRoute.disabled = True;
    sldStep.disabled = True;
    ftLoop.disabled = True;
    btnStopSend.disabled = False;
    isInPause = False;
  }else if (btnPlay.text == "Resume" ) {
    btnPlay.text = "Pause";
    isInPause = False;
 } else {
    btnPlay.text = "Resume";
    isInPause = True;
  }
return savethefunction_rvar; }

btnStopSend.onclick = function() { savethefunction_rvar="";
 //Stop data
    clearInterval(timerRefSend);
    isInPause = False;
    sldSend.disabled = False;
    cmbRoute.disabled = False;
    ftLoop.disabled = False;
    sldStep.disabled = False;
    btnStopSend.disabled = True;
    btnPlay.text = "Play";
return savethefunction_rvar; }

 // manage the "interval send" timer slider
sldSend.onchange = function() { savethefunction_rvar="";
  intervalSend = sldSend.value;
return savethefunction_rvar; }

 // manage the "step" slider
sldStep.onchange = function() { savethefunction_rvar="";
  stepRoute = Math.floor(sldStep.value);
  increment = stepRoute;
return savethefunction_rvar; }


 // send data to platform
function onTimerSend() { savethefunction_rvar="";
 var jt;
    if(isInPause == False) {
      lblSendN.Caption = "Sent "  +  (nmsg + 1)  +  " / "  +   maxmsg  +  " GPS points";

      nmsg = nmsg + increment;

      if(nmsg >= maxmsg || nmsg < 0) {
        if(ftLoop.value() == "On") {
            increment = - increment;
             return;
 } else {
          btnPlay.onclick();
        }

 } else {
        jt = "{" + '"' + "stream" + '"' + ": " + '"' + "" + NomeStream + "" + '"' + ", ";
        jt = jt + "" + '"' + "sensor" + '"' + ": " + '"' + "" + SensorID + "" + '"' + ", ";
        jt = jt + "" + '"' + "values" + '"' + ": [{";
        jt = jt + "" + '"' + "time" + '"' + ": " + '"' + "" +  TimeStamp() + "" + '"' + ", ";
        jt = jt + "" + '"' + "components" + '"' + ": {";
        jt = jt + "" + '"' + "longitude" + '"' + ": " + '"' + "" + data.trkpt[nmsg].lon + "" + '"' + ", ";
        jt = jt + "" + '"' + "latitude" + '"' + ": " + '"' + "" + data.trkpt[nmsg].lat + "" + '"' + ", ";
        jt = jt + "" + '"' + "altitude" + '"' + ": " + '"' + "" + data.trkpt[nmsg].ele + "" + '"' + ", ";
        jt = jt + "" + '"' + "speed" + '"' + ": 0.0}}]} ";

        lblLat2.Caption = data.trkpt[nmsg].lat;
        lblLon2.Caption = data.trkpt[nmsg].lon;
var xmlHttp = new XMLHttpRequest();
          xmlHttp.open( "POST", urlSend, True);
          xmlHttp.setRequestHeader("Authorization", "Basic c21hcnRsYWI6VXgwbXU1aXQ="); 
          xmlHttp.setRequestHeader("Content-Type", "application/json"); 
          xmlHttp.send( jt );
}
    }
return savethefunction_rvar; }

 // manage the "route selection" combo box and load the route data
cmbRoute.onchange = function() { savethefunction_rvar="";
   req = Ajax(urlRoute  +  cmbRoute.selectedValue());
   if(!req )  { return savethefunction_rvar; }
  if(req.readyState != 4 )  { return savethefunction_rvar; } //ignore progress reports

  if(req.status != 200) { //failure
    _msgbox_confirm("Error: "  +  req.err);
     return savethefunction_rvar;
  }

  if(Left(req.responseText,5)!="<?xml") {
    _msgbox_confirm("XML not received"  +  req.responseText);
     return savethefunction_rvar;
  }
  data = $.xml2json(req.responseText);
  maxmsg = data.trkpt.length;
  lblPoint.Caption = maxmsg;
return savethefunction_rvar; }


 //manage the headerBar button
hdrTrack.onclick = function(button) { savethefunction_rvar="";
  if(TypeName(button)=="object" )  { return savethefunction_rvar; }

 // manage the "save" button click
  if(button == "Home") {
      if(btnPlay.text == "Play") {
          ChangeForm(frmHome);
 } else {
          btnPlay.onclick();
          ChangeForm(frmHome);
      }
  }
return savethefunction_rvar; }





window.addEventListener('orientationchange', function(){window.scrollTo(0,0)});
window.addEventListener('load', function() {
  browserWarningMessage('Please use Google Chrome, Apple Safari or another supported browser.');
  frmHome.style.display = 'block';
  Main();
  if (typeof(frmHome.onshow)=='function') frmHome.onshow();
  
}, false);

var NSBCurrentForm = frmHome;

var SensorID;
var NomeStream;
var latitudine;
var longitudine;
var vel;
var altitudine;
var urlSend;
var urlRoute;



function Main() {
  SensorID = "cc1bfe50-491c-560d-a235-0e4134bbdc23";
  intervalRefresh = 500;
  NomeStream = "position";
  urlSend = "http://stream.smartdatanet.it/api/input/smartlab";
 //urlRoute = "http://esperimenti.gabriele-pellegrinetti.it/sensor/route/"
  urlRoute = "route/";
}

function TimeStamp() { savethefunction_rvar="";
 var t;
 var fDate;
  t = dateadd("s",0,new Date());
    fDate = "";
  fDate = fDate  +  Year(t)  +  "-";
  if(Month(t) < 10) {
    fDate = fDate  +  "0"  +  Month(t);
 } else {
    fDate = fDate  +  Month(t);
  }

  fDate = fDate  +  "-";

  if(Day(t) < 10) {
    fDate = fDate  +  "0"  +  Day(t);
 } else {
    fDate = fDate  +  Day(t);
  }

  fDate = fDate  +  "T";

   if(Hour(t) < 10) {
    fDate = fDate  +  "0"  +  Hour(t);
 } else {
    fDate = fDate  +  Hour(t);
  }

  fDate = fDate  +  ":";

  if(Minute(t) < 10) {
    fDate = fDate  +  "0"  +  Minute(t);
 } else {
    fDate = fDate  +  Minute(t);
  }

  fDate = fDate  +  ":";

  if(Second(t) < 10) {
    fDate = fDate  +  "0"  +  Second(t);
 } else {
    fDate = fDate  +  Second(t);
  }

  fDate = fDate  +  "+0200";

   savethefunction_rvar  = fDate;

return savethefunction_rvar; }
</script>

</body>
</html>